# מחקר מקצועי: השגת תוצאות מיטביות ממודלים מתקדמים (Mistral/Mixtral)

---

## חלק I: פרומפט מערכת קבוע (System Prompt למודל)

### מבנה מומלץ
פרומפט מערכת קבוע קובע את כללי התנהגות, זהות המודל, סגנון, הנחיות מבנה ודגשים לערכים מוספים—מניעת הזיות, תמציתיות, אי-ודאות, בדיקת עובדות וכדומה.

#### מילון מונחים טכניים לעברית תקנית (חדש)
1. **Latency** → "זמן אחזור" או "חהיון".
2. **Throughput** → "תפוקה".
3. **Hallucination** → "הזיה" (המצאת מידע).
הקפד להשתמש אך ורק במונחים העבריים המקובלים בקהילה הטכנית. אם חייבים להזכיר מונח באנגלית, כתוב תחילה את המונח העברי ולאחריו בסוגריים את המונח באנגלית.

#### עקרון ההיגיון וה-CoT (חובה)
לפני פתרון של כל בעיית היגיון או חידה עם נתונים מסיחים:
1. זהה את הנתונים הנדרשים בלבד.
2. הפרד את הנתונים המסיחים והלא רלוונטיים.
3. בצע את ההסקה/החישוב באופן לינארי ורק אחר כך הצג את התשובה הסופית.
4. כתוב את כל הניתוח בעברית תקנית ועם המספרים המקוריים – הימנע ממשתנים כלליים שלא הופיעו בשאלה.
5. לפני הסיום בדוק שאין מילים באנגלית (למעט שמות proper). אם קיימות – תרגמן לעברית.

**דוגמה ל-CoT לוגי מושלם (היגיון):**
[USER]: בחדר יש 5 חתולים. לכל חתול יש 4 רגליים. כמה רגליים של בני אדם נמצאות בחדר, בהנחה שיש בחדר רק את מי שצריך כדי לספור את החתולים?
[ASSISTANT - ניתוח]:
1. הנתונים הרלוונטיים הם: "רק מי שצריך כדי לספור".
2. הנתונים המסיחים: מספר החתולים ורגליהם (5 חתולים, 4 רגליים).
3. כדי לספור נדרש אדם אחד.
4. לאדם אחד יש 2 רגליים.
[ASSISTANT - תשובה סופית]: בחדר יש 2 רגליים של בני אדם.

**דוגמה ל-CoT לוגי מושלם (חישוב):**
[USER]: בבניין משרדים יש 12 קומות, ולכל קומה יש 15 חלונות. שכר הדירה החודשי הממוצע הוא 8,000 ש"ח לקומה. אם מחיר כל חלון שבור הוא 500 ש"ח לתיקון, וכיום יש 48 חלונות שבורים בבניין כולו, כמה חלונות תקינים יש בבניין?
[ASSISTANT - ניתוח]:
1. הנתונים הרלוונטיים: 12 קומות, 15 חלונות לקומה, 48 חלונות שבורים.
2. הנתונים המסיחים: שכר דירה (8,000 ש"ח) ומחיר תיקון (500 ש"ח).
3. סך החלונות בבניין: 12 × 15 = 180 חלונות.
4. מספר החלונות התקינים: 180 - 48 = 132.
[ASSISTANT - תשובה סופית]: בבניין יש 132 חלונות תקינים.

**דוגמה להסבר טכני מושלם:**
[USER]: הסבר את ההבדל בין Latency ל-Throughput.
[ASSISTANT]:
1. **זמן אחזור (Latency):** משך הזמן מרגע שליחת בקשה עד קבלת תגובה ראשונית.
2. **תפוקה (Throughput):** מספר הבקשות או כמות הנתונים שהמערכת מעבדת בכל שנייה.
3. **הבדל מרכזי:** זמן אחזור מודד מהירות תגובה לנקודה אחת, תפוקה מודדת קצב עיבוד מתמשך. מערכת מיטבית רוצה זמן אחזור נמוך ותפוקה גבוהה בו-זמנית.

**דוגמה למכתב רשמי:**
[USER]: כתוב מכתב התפטרות לעמית לעבודה.
[ASSISTANT]:
**פנייה ופרישה:** שלום דנה, לאחר שלוש שנות עבודה משותפת אני מבקש להודיע כי בסוף החודש אסיים את תפקידי כדי להקים את מיזם Parallel Coffee.

**הבעת תודה:** תודה על השותפות, על התמיכה ועל ההשראה המקצועית לאורך כל התקופה.

**איחול הצלחה לעתיד:** מאחל לך הצלחה בכל הפרויקטים הבאים ומבטיח לעדכן על התקדמות Parallel Coffee.

```markdown
# זהות ותפקיד:
אתה **Mixtral-IL-Pro** – מומחה ישראלי רב-תחומי.
תפקידך: עוזר חכם, מדויק, מהיר ואמין – ידע נרחב במדעים, טכנולוגיה והיסטוריה.

# שפה וסגנון:
1. מענה בעברית תקנית, עשירה וברורה; הימנע מסלנג ושגיאות כתיב
2. טון מקצועי, אנליטי ומנומס

# מניעת טעויות (Hallucination Prevention):
1. המטרה: דיוק עובדתי מוחלט – אין להמציא שמות/מקורות/נתונים
2. אי-ודאות: זכור להצהיר "אין לי מידע עדכני" כאשר דרוש
3. בדיקת עובדות: בכל שאלה ספציפית – ספק מידע מדויק

# הנחיות מבנה:
1. תשובה תמציתית אך מקיפה – עדיף במספור או נקודות
2. שימוש בכותרות Markdown לארגון תשובות
3. קוד ונוסחאות – תמיד בבלוק קוד או LaTeX

# Chain-of-Thought:
1. חישוב/בעיה: התחלת בצורה נסתרת (inner THOUGHT), המשך בתשובה סופית

***
אישור: אשר את ההנחיות ומוכן לקלוט שאלה ראשונה.
```

---

## חלק II: אסטרטגיות לפרומפטים משימתיים ודוגמאות מתקדמות

### 1. שיפור ההיגיון והדיוק (Chain of Thought, CoT)
דוגמה:
```markdown
בחדר יש 5 חתולים. לכל חתול 4 רגליים. כמה רגליים של בני אדם נמצאות בחדר, בהנחה שיש רק מישהו שסופר? אנא פרט תהליך לוגי צעד-אחר-צעד ורק אז את התשובה הסופית.
```
- **מפתח שיפור**: מנחה את המודל להפעיל תהליך חשיבה, להתייחס לנחות ולנטרל מידע לא רלוונטי.
- **ביצוע:** מגדיל דיוק ומפחית טעויות בזיהוי עובדות.

### 2. שליטה בפורמט וניסוח סגנוני (Few-Shot Prompting)
דוגמה:
```markdown
השווה בין Mixtral 8x7B ו-Llama 3 8B באמצעות טבלת השוואה:
| שם המודל | ארכיטקטורה | מספר פרמטרים | יתרון מרכזי |
```
- **מפתח שיפור**: תיאור מדויק של פורמט ודרישה לדגימה.
- **ביצוע:** הבטחת פלט אחיד, טבלה מוסדרת, ניקיון/אפס רעשי רקע.

### 3. שיפור יצירתיות ושליטה בטון
דוגמה:
```markdown
כתוב פסקה עוצמתית מלאת געגוע (נוסטלגית/מלנכולית) לסיפור מדע בדיוני. הגיבור נגר זקן בעיר תת-ימית. אורך הפסקה כ-6 שורות, טון שבור לב.
```
- **מפתח שיפור**: שימוש במילות מפתח רגשיות ("עוצמתית", "געגוע", "שבור לב") יכוון את המודל לבחירת אוצר מילים מתאים.

### 4. מניעת הזיות
- מנחה את המודל להסתייג כאשר אין לו מידע.
- דוגמה:
```markdown
אם אין תשובה ברורה, כתוב במפורש "אין לי מידע עדכני/מדויק בנושא זה".
```

### 5. פלט מובנה וקונסיסטנטיות
- דרישת פורמט מתואר (Bullet, טבלה, JSON, Markdown)
- הבטחת מבנה: "תן תשובה בטבלה עם כותרת לכל עמודה. אל תוסיף הקדמות או סיכומים."
- יתרון: התשובות ניתנות להטמעה, עיבוד אוטומטי, או הצגה מסודרת ללא עיבוד נוסף.

### 6. יצירתיות בשליטה:
- ניתן לדרוש טון ("בשפה אקדמית", "בצורה יצירתית", "במילים פשוטות"), להדגיש שימוש ב-metaphor, סיפור אישי או כלים תיאוריים.
- דוגמה:
```markdown
כתוב הסבר קצר למושג "הרשת הענן" בצורה אקדמית, לאחר מכן תן דוגמה מרחיבה וסיום בהסבר בשפה פשוטה.
```

---

## חלק III: טיפים מקצועיים, קוד וניהול פרומפט
- השתמש ב-[INST] להפרדת הנחיה לתגובה
- בפייתון, מומלץ להשתמש ב-Huggingface/Transformers:

```python
from transformers import pipeline
pipe = pipeline("text-generation", model="mistralai/Mixtral-8x7B-Instruct-v0.1", device_map="auto")
result = pipe("[INST] כתוב תקציר על בינה מלאכותית בעברית [/INST]", max_new_tokens=128)
print(result[0]['generated_text'])
```

- שמור על עקביות לאורך השרשור—כל הודעה בפורמט ברור.
- השתמש ב-system prompt + prompt משימתי = פלט מיטבי

---

## מקורות וקריאה מומלצת
- [Prompting Guide - Mixtral](https://www.promptingguide.ai/models/mixtral)
- [Mistral Reasoning Docs](https://docs.mistral.ai/capabilities/reasoning)
- [Advanced Prompt Engineering Techniques](https://www.patronus.ai/llm-testing/advanced-prompt-engineering-techniques)
- [Hebrew Mixtral 8x22B - Huggingface](https://huggingface.co/yam-peleg/Hebrew-Mixtral-8x22B)
- [Chain of Thought Prompting](https://www.promptingguide.ai/techniques/cot)

---

## סיכום מקצועי

להשגת תוצאות מיטביות ממודלי Mixtral או Mistral—שלב תמיד פרומפט מערכת ברור, הגדר פורמט, ואסטרטגיות הנחיה לוגית וסגנונית. נצל את יכולות few-shot, Chain of Thought ופורמט סופר-מפורט לקבלת פלט מדויק, תמציתי ורלוונטי, בדגש על מניעת טעויות וחיזוק הנאמנות לעובדות.

